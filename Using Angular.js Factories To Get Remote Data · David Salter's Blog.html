<!DOCTYPE html>
<!-- saved from url=(0170)http://webcache.googleusercontent.com/search?q=cache:u1tWk_w5f-QJ:davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html+&cd=1&hl=ru&ct=clnk&gl=ua -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<base href="http://davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html">--><base href="."><script type="text/javascript" async="" src="./Using Angular.js Factories To Get Remote Data · David Salter's Blog_files/embed.js"></script><script src="./Using Angular.js Factories To Get Remote Data · David Salter's Blog_files/alfie.f51946af45e0b561c60f768335c9eb79.js" async="" charset="UTF-8"></script></head><body class="theme-base-08"><div style="background:#fff;border:1px solid #999;margin:-1px -1px 0;padding:0;"><div style="background:#ddd;border:1px solid #999;color:#000;font:13px arial,sans-serif;font-weight:normal;margin:12px;padding:8px;text-align:left">Это версия страницы <a href="http://davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html" style="text-decoration:underline;color:#00c">http://davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html</a> из кеша Google. Она представляет собой снимок страницы по состоянию на 6 мар 2015 20:07:59 GMT. <a href="http://davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html" style="text-decoration:underline;color:#00c">Текущая страница</a> за прошедшее время могла измениться. <a href="http://support.google.com/websearch/bin/answer.py?hl=ru&p=cached&answer=1687222" style="text-decoration:underline;color:#00c">Подробнее</a><br>Совет. Чтобы искать на странице, нажмите <b>Ctrl+F</b> или <b>⌘-F</b> (для MacOS) и введите запрос в поле поиска.<br><br><div style="float:right"><a href="http://webcache.googleusercontent.com/search?q=cache:u1tWk_w5f-QJ:davidsalter.com/2013/08/using-angular-dot-js-factories-to-get-remote-data.html&hl=ru&gl=ua&strip=1" style="text-decoration:underline;color:#00c">Текстовая версия</a></div>
<div>&nbsp;</div></div></div><div style="position:relative">



  
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Using Angular.js Factories To Get Remote Data · David Salter's Blog
    
  </title>

  <!-- CSS -->
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="http://davidsalter.com/public/css/poole.css">
  <link rel="stylesheet" href="http://davidsalter.com/public/css/syntax.css">
  <link rel="stylesheet" href="http://davidsalter.com/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://davidsalter.com/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="http://davidsalter.com/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://davidsalter.com/atom.xml">


	
  

	<script async="" src="./Using Angular.js Factories To Get Remote Data · David Salter's Blog_files/analytics.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35084522-1', 'auto');
  ga('send', 'pageview');

</script>
	  
    <div class="sidebar"> 
	
	<div class="social">
	<img src="./Using Angular.js Factories To Get Remote Data · David Salter's Blog_files/David_Salter.jpg">
	<div class="social-accounts">
		<a href="http://davidsalter.com/atom.xml"><i class="fa fa-rss fa-2x"></i></a>  
		<a href="http://github.com/doobrie"><i class="fa fa-github fa-2x"></i></a>  
		<a href="http://twitter.com/cocoadavid"><i class="fa fa-twitter fa-2x"></i></a>  
	</div>
	<div class="social-about"><a href="http://davidsalter.com/about.html">David Salter</a></div>
</div>

  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h2>
        <a href="http://davidsalter.com/">
          David Salter's Blog
        </a>
      </h2>
      <p class="lead">A blog about software development, mostly curly bracket languages.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="http://davidsalter.com/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="http://davidsalter.com/about.html">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="http://davidsalter.com/archive.html">Archive</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      
    </nav>

    <p>© 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Using Angular.js Factories To Get Remote Data</h1>
  <span class="post-date">16 Aug 2013</span>
  <p>In this post, I'd like to show the differences between using an <a href="http://www.angularjs.org/">Angular.js</a> factory to get local JSON data vs remote data via an AJAX call.</p>

<p>For this example, I'm assuming that we have a JSON dataset that describes different types of fruit, for example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
    <span class="s2">"fruits"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
        <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Apple"</span>
        <span class="p">},</span>
        <span class="p">{</span>
        <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"2"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Orange"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>At it's simplest, an Angular.js view to iterate over this data could look like the following HTML:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">ng-app=</span><span class="s">"fruitsApp"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Angular Sample App<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"fruitsController"</span><span class="nt">&gt;</span>  
        <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">"fruit in fruits"</span><span class="nt">&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<h2>A Hardcoded Angular.js Controller and Factory</h2>

<p>In the HTML view, we can see that an Angular.js controller called <code>fruitsController</code> is being used within a module called <code>fruitsApp</code>.  We're then using <code>ng-repeat</code> to iterate through a collection of fruit and add them into a simple HTML list.</p>

<p>If we wanted to get data locally rather than via HTTP, we could declare a controller and factory as follows:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fruitsApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'fruitsApp'</span><span class="p">,</span> <span class="p">[])</span>

<span class="nx">fruitsApp</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'fruitsFactory'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">getFruits</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span>  <span class="p">[{</span><span class="s2">"id"</span><span class="o">:</span> <span class="s2">"1"</span><span class="p">,</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Apple"</span><span class="p">},</span> <span class="p">{</span><span class="s2">"id"</span><span class="o">:</span> <span class="s2">"2"</span><span class="p">,</span><span class="s2">"name"</span><span class="o">:</span> <span class="s2">"Orange"</span><span class="p">}];</span>
        <span class="p">},</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="nx">fruitsApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'fruitsController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">fruitsFactory</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">fruits</span> <span class="o">=</span> <span class="nx">fruitsFactory</span><span class="p">.</span><span class="nx">getFruits</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>This is a very simple controller and factory.  The <code>fruitsController</code> returns a view model which is populated from the <code>fruitsFactory</code>, which simply has a hardcoded static list of fruit.</p>

<h2>A Dynamic Angular.js Controller and Factory Using AJAX</h2>

<p>The above exampe will work for getting data, but isn't of much use for dynamically generated content.  For dynamic content, we need to make an HTTP request to get our data, for example via a REST call.</p>

<p>To make a HTTP call via an Angular.js factory, we need to pass the <code>$http</code> object into the factory and then make a call to the remote HTTP request using the <code>$http.get()</code> method.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fruitsApp</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'fruitsApp'</span><span class="p">,</span> <span class="p">[])</span>

<span class="nx">fruitsApp</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'fruitsFactory'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">getFruitsAsync</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'fruits.json'</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="nx">fruitsApp</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'fruitsController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">fruitsFactory</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fruitsFactory</span><span class="p">.</span><span class="nx">getFruitsAsync</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fruitsController async returned value'</span><span class="p">);</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">fruits</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">fruits</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>In this example, you can see that the controller makes a request to the factory which then calls an asynchronous function (<code>$http.get</code>) to get the data.  When this asynchronous function completes successfully, it calls back to an anonymous function in the controller and populates the view model.</p>


	 <div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Using Angular.js Factories To Get Remote Data · David Salter's Blog_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 2336px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
	    <script type="text/javascript">
	        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	        var disqus_shortname = 'davidsalter'; // required: replace example with your forum shortname

	        /* * * DON'T EDIT BELOW THIS LINE * * */
	        (function() {
	            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	        })();
	    </script>
	    <noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>
    
	
</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="http://davidsalter.com/2015/03/enumerating-namedquery-inside-namedqueries.html">
            Enumerating @NamedQuery within @NamedQueries
            <small>05 Mar 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://davidsalter.com/2015/02/node-modules-what-does-require-do.html">
            Node Modules - What does require() do?
            <small>26 Feb 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://davidsalter.com/2015/01/testing-article-at-rebellabs.html">
            Testing Article Published At RebelLabs
            <small>21 Jan 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  

</div></body></html>